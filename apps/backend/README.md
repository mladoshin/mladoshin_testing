# Backend

## –û–ø–∏—Å–∞–Ω–∏–µ

Backend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–æ –Ω–∞ NestJS —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º TypeScript. –†–µ–∞–ª–∏–∑—É–µ—Ç REST API –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–Ω–ª–∞–π–Ω-–∫—É—Ä—Å–∞–º–∏. –í–∫–ª—é—á–∞–µ—Ç –º–æ–¥—É–ª–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –∫—É—Ä—Å–∞–º–∏, —É—Ä–æ–∫–∞–º–∏ –∏ –ø–ª–∞—Ç–µ–∂–∞–º–∏.

## –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- **Node.js** + **TypeScript** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **NestJS** ‚Äî —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- **TypeORM** ‚Äî ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **PostgreSQL** ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –°–£–ë–î
- **JWT** ‚Äî –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ç–æ–∫–µ–Ω—ã
- **bcryptjs** ‚Äî —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- **Jest** ‚Äî —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è unit –∏ integration —Ç–µ—Å—Ç–æ–≤
- **Allure** ‚Äî –∫—Ä–∞—Å–∏–≤—ã–µ –æ—Ç—á–µ—Ç—ã –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
# –∏–ª–∏
pnpm install
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª—ã –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
# –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
.env

# –î–ª—è —Ç–µ—Å—Ç–æ–≤
.env.test
```

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
- `DB_HOST`, `DB_PORT`, `DB_USERNAME`, `DB_PASSWORD`, `DB_DATABASE` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ PostgreSQL
- `JWT_SECRET`, `JWT_EXPIRES_IN` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ JWT
- `JWT_REFRESH_SECRET`, `JWT_REFRESH_EXPIRES_IN` ‚Äî refresh —Ç–æ–∫–µ–Ω—ã

## –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å hot-reload
npm run start:dev

# Debug —Ä–µ–∂–∏–º
npm run start:debug

# Production —Å–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
npm run build
npm run start:prod
```

### Docker

```bash
# –ó–∞–ø—É—Å–∫ PostgreSQL —á–µ—Ä–µ–∑ Docker Compose
docker-compose up -d
```

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

–ü—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç unit –∏ integration —Ç–µ—Å—Ç—ã. Integration —Ç–µ—Å—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ö–µ–º—ã –≤ PostgreSQL –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç-—Ñ–∞–π–ª–∞.

### –ú–µ—Ö–∞–Ω–∏–∑–º –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏–∏ –≤ Jest

Jest –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **worker pool** –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤. –í–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å:

**–£—Ä–æ–≤–µ–Ω—å –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏–∏:**
- üîπ **–û–¥–∏–Ω —Ç–µ—Å—Ç-—Ñ–∞–π–ª = –æ–¥–∏–Ω worker** ‚Äî Jest **–ù–ï** –¥–µ–ª–∏—Ç —Ç–µ—Å—Ç—ã –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –º–µ–∂–¥—É –≤–æ—Ä–∫–µ—Ä–∞–º–∏
- üîπ –í—Å–µ —Ç–µ—Å—Ç—ã –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ `.spec.ts` —Ñ–∞–π–ª–∞ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è **–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ** –≤ –æ–¥–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ
- üîπ –ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –º–µ–∂–¥—É **—Ä–∞–∑–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           Jest Runner (–≥–ª–∞–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å)                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ
        ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚ñº         ‚ñº         ‚ñº         ‚ñº         ‚ñº
    Worker 1  Worker 2  Worker 3  Worker 4  (–æ—á–µ—Ä–µ–¥—å...)
        ‚îÇ         ‚îÇ         ‚îÇ         ‚îÇ
        ‚ñº         ‚ñº         ‚ñº         ‚ñº
  auth.spec  user.spec course.spec payment.spec
   (–≤—Å–µ it    (–≤—Å–µ it    (–≤—Å–µ it    (–≤—Å–µ it
  –≤–Ω—É—Ç—Ä–∏ ‚Üí)  –≤–Ω—É—Ç—Ä–∏ ‚Üí)  –≤–Ω—É—Ç—Ä–∏ ‚Üí)  –≤–Ω—É—Ç—Ä–∏ ‚Üí)
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–æ—Ä–∫–µ—Ä–æ–≤:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ó–Ω–∞—á–µ–Ω–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ |
|----------|----------|-------------------|
| `--maxWorkers=N` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ | `4` (–¥–ª—è parallel —Ä–µ–∂–∏–º–∞) |
| `--runInBand` | –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ –æ–¥–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ | Sequential —Ä–µ–∂–∏–º |
| –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ, Jest –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `CPU cores - 1` | –ù–∞ —ç—Ç–æ–π –º–∞—à–∏–Ω–µ: `11` –≤–æ—Ä–∫–µ—Ä–æ–≤ |

**–í –Ω–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ:**
- üìÅ –í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤: **35**
- ‚öôÔ∏è –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π —Ä–µ–∂–∏–º: **4 –≤–æ—Ä–∫–µ—Ä–∞** ‚Üí –º–∞–∫—Å–∏–º—É–º 4 —Ñ–∞–π–ª–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- üîÑ –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π —Ä–µ–∂–∏–º: **1 –ø—Ä–æ—Ü–µ—Å—Å** ‚Üí –≤—Å–µ —Ñ–∞–π–ª—ã –ø–æ –æ—á–µ—Ä–µ–¥–∏

**–ü—Ä–∏–º–µ—Ä —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:**
```
Worker 1: auth.service.spec.ts    ‚Üí –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤—Å–µ it/describe –≤–Ω—É—Ç—Ä–∏
Worker 2: user.service.spec.ts    ‚Üí –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤—Å–µ it/describe –≤–Ω—É—Ç—Ä–∏
Worker 3: course.service.spec.ts  ‚Üí –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤—Å–µ it/describe –≤–Ω—É—Ç—Ä–∏
Worker 4: payment.service.spec.ts ‚Üí –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤—Å–µ it/describe –≤–Ω—É—Ç—Ä–∏
```

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ª—é–±–æ–≥–æ –≤–æ—Ä–∫–µ—Ä–∞, –æ–Ω –±–µ—Ä–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π —Ñ–∞–π–ª –∏–∑ –æ—á–µ—Ä–µ–¥–∏.

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ jest.config.ts:**
```typescript
// –ë–µ–∑ —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è maxWorkers –≤ –∫–æ–Ω—Ñ–∏–≥–µ
// –£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ CLI —Ñ–ª–∞–≥–∏ –≤ package.json
```

### –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã —á–µ—Ä–µ–∑ npm

```bash
# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–±—ã—Å—Ç—Ä–µ–µ, 4 –≤–æ—Ä–∫–µ—Ä–∞)
npm run test:parallel

# –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–º–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ)
npm run test:sequential

# –° —Ä–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏–µ–π –ø–æ—Ä—è–¥–∫–∞ (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ç–µ—Å—Ç–æ–≤)
npm run test:parallel:random
npm run test:sequential:random

# –° –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –æ—Ç—á–µ—Ç–∞ Allure –∏ –µ–≥–æ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º
npm run test

# Watch —Ä–µ–∂–∏–º –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run test:watch

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
npm run test:cov
```

### –°–∫—Ä–∏–ø—Ç —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏

–î–ª—è –±–æ–ª–µ–µ –≥–∏–±–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ bash-—Å–∫—Ä–∏–ø—Ç:

```bash
./run-tests.sh [OPTIONS]
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –æ–ø—Ü–∏–∏:**

| –§–ª–∞–≥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `-o` | **Offline —Ä–µ–∂–∏–º** ‚Äî –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç integration —Ç–µ—Å—Ç—ã (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `IS_OFFLINE=true`) |
| `-m MODE` | **–†–µ–∂–∏–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** ‚Äî `parallel` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –∏–ª–∏ `sequential` |
| `-r` | **–†–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏—è** ‚Äî —Å–ª—É—á–∞–π–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ |
| `-s` | **–ü–æ–∫–∞–∑–∞—Ç—å Allure** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –æ—Ç—á–µ—Ç –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è |
| `-t PATH` | **–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç** ‚Äî –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –∏–ª–∏ –ø–∞–ø–∫—É |
| `-h` | **–°–ø—Ä–∞–≤–∫–∞** ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –æ–ø—Ü–∏–π |

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```bash
# –ü—Ä–æ—Å—Ç–æ–π –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å –æ—Ç—á–µ—Ç–æ–º
./run-tests.sh -s

# –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –±–µ–∑ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
./run-tests.sh -o -m sequential

# –†–∞–Ω–¥–æ–º–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Å –æ—Ç—á–µ—Ç–æ–º (–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ flaky tests)
./run-tests.sh -r -s

# –¢–æ–ª—å–∫–æ auth –º–æ–¥—É–ª—å, –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
./run-tests.sh -t src/modules/auth/tests -m sequential -s

# Offline —Ä–µ–∂–∏–º —Å —Ä–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏–µ–π
./run-tests.sh -o -r -s
```

### –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏–∏

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤:

```bash
# 8 –≤–æ—Ä–∫–µ—Ä–æ–≤ (–¥–ª—è –º–æ—â–Ω—ã—Ö –º–∞—à–∏–Ω)
jest --maxWorkers=8

# 50% –æ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö CPU
jest --maxWorkers=50%

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (CPU cores - 1)
jest

# –û–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å (–æ—Ç–ª–∞–¥–∫–∞)
jest --runInBand
```

–ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –≤ `package.json`:
```json
"test:parallel": "jest --maxWorkers=8",  // –±—ã–ª–æ: 4
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- üíª **Development:** 2-4 –≤–æ—Ä–∫–µ—Ä–∞ (–±—ã—Å—Ç—Ä–æ + –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É)
- üè¢ **CI/CD:** 50% –∏–ª–∏ –∞–≤—Ç–æ (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–æ–≤)
- üêõ **Debugging:** `--runInBand` (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ)
- üîç **Flaky tests:** `--runInBand` (–∏—Å–∫–ª—é—á–∞–µ—Ç race conditions –º–µ–∂–¥—É —Ñ–∞–π–ª–∞–º–∏)

**–ê–Ω–∞–ª–∏–∑ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏–∏:**
```bash
# –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏–∏
./scripts/check-parallelization.sh
```

üìñ **–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** [–î–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏–∏](./docs/PARALLELIZATION.md)

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

```bash
# –û–¥–∏–Ω —Ñ–∞–π–ª
npm run test:parallel -- auth.controller.spec.ts

# –í—Å—è –ø–∞–ø–∫–∞
npm run test:parallel -- src/modules/auth

# –ü–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É
npm run test:parallel -- --testNamePattern="login"
```

## –û—Ç—á–µ—Ç—ã Allure

Allure –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫—Ä–∞—Å–∏–≤—ã–µ HTML-–æ—Ç—á–µ—Ç—ã —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ —Ç–µ—Å—Ç–æ–≤, –≤–∫–ª—é—á–∞—è:
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —É—Å–ø–µ—à–Ω—ã—Ö/—É–ø–∞–≤—à–∏—Ö —Ç–µ—Å—Ç–æ–≤
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—à–ª—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤
- –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–æ–∫ –∏ —Å—Ç–µ–∫-—Ç—Ä–µ–π—Å—ã

### –ö–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç—ã —Å –æ—Ç—á–µ—Ç–∞–º–∏

```bash
# –û—Ç–∫—Ä—ã—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –æ—Ç—á–µ—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ
npm run allure:show

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π –æ—Ç—á–µ—Ç –∏–∑ —Ç–µ–∫—É—â–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
npm run allure:append

# –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –ø–µ—Ä–µ–¥ –Ω–æ–≤—ã–º –∑–∞–ø—É—Å–∫–æ–º
npm run allure:prepare

# –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—Å—Ç–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –æ—Ç—á–µ—Ç—ã
npm run allure:clean

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç —Å –Ω—É–ª—è
npm run allure:rewrite
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞

- `allure-results/` ‚Äî JSON —Ñ–∞–π–ª—ã —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Ç–µ—Å—Ç–æ–≤
- `allure-report/` ‚Äî —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π HTML –æ—Ç—á–µ—Ç
- `allure-report/history/` ‚Äî –∏—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—à–ª—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ò—Å—Ç–æ—Ä–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ç—Ä–µ–Ω–¥–æ–≤.

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
npm run console

# –û–±–Ω–æ–≤–∏—Ç—å PostgreSQL —Ñ—É–Ω–∫—Ü–∏–∏
npm run pg:update-function
npm run pg:update-test-function

# –õ–∏–Ω—Ç–∏–Ω–≥ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
npm run lint
npm run format

# –ê–Ω–∞–ª–∏–∑ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤
./scripts/check-parallelization.sh
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ common/              # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã, –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã, guards
‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îú‚îÄ‚îÄ auth/           # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ user/           # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ course/         # –ö—É—Ä—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ lesson/         # –£—Ä–æ–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ payment/        # –ü–ª–∞—Ç–µ–∂–∏
‚îî‚îÄ‚îÄ main.ts             # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞

test/                    # E2E —Ç–µ—Å—Ç—ã

docs/                    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ PARALLELIZATION.md           # –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ PARALLELIZATION_SUMMARY.md   # –°–≤–æ–¥–∫–∞ –∞–Ω–∞–ª–∏–∑–∞
‚îî‚îÄ‚îÄ PARALLELIZATION_CHEATSHEET.md # –®–ø–∞—Ä–≥–∞–ª–∫–∞

scripts/
‚îî‚îÄ‚îÄ check-parallelization.sh     # –°–∫—Ä–∏–ø—Ç –∞–Ω–∞–ª–∏–∑–∞ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏–∏
```

## Troubleshooting

**–¢–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç —Å –æ—à–∏–±–∫–∞–º–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `.env.test`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë–î

**Offline —Ä–µ–∂–∏–º:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–ª–∞–≥ `-o` –¥–ª—è –ø—Ä–æ–ø—É—Å–∫–∞ integration —Ç–µ—Å—Ç–æ–≤
- –ü–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î –∏–ª–∏ –≤ CI/CD

**Allure –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Allure —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: `npm install -g allure-commandline`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ `allure-results/`
